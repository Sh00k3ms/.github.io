<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leaderboard</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <main>
    <h1>ğŸ•¶ï¸ Hack the Stack â€“ Elite Solvers</h1>
    <ul id="leaderboard"></ul>
  </main>

  <script>
    async function loadLeaderboard() {
      const sheetUrl = "https://docs.google.com/spreadsheets/d/yourSheetID/gviz/tq?tqx=out:json";
      const res = await fetch(sheetUrl);
      const text = await res.text();
      const json = JSON.parse(text.substring(47).slice(0, -2));

      const rows = json.table.rows.map(r => ({
        handle: r.c[0]?.v,
        timestamp: r.c[1]?.v
      }));

      const filtered = rows
        .filter(r => !!r.handle)
        .slice(0, 10)
        .map(r => `<li>${r.handle.replace(/(?<=.{2}).(?=.*@|$)/g, "*")} â€“ ${r.timestamp}</li>`)
        .join("");

      document.getElementById("leaderboard").innerHTML = filtered;
    }

    loadLeaderboard();
  </script>
</body>
</html>
